CREATE USER docker;
GRANT ALL PRIVILEGES ON DATABASE restaurant TO docker;

CREATE TABLE IF NOT EXISTS PRODUCT (
    PRD_ID INT NOT NULL PRIMARY KEY,
    PRD_NAME VARCHAR(255) NOT NULL,
    TYPE INT NOT NULL
);

CREATE TABLE IF NOT EXISTS PRODUCT_STATUS (
    PRD_ID INT NOT NULL PRIMARY KEY,
    STATUS INT NOT NULL,
    CONSTRAINT FK_STATUS_PRODUCT FOREIGN KEY(PRD_ID) REFERENCES PRODUCT(PRD_ID)
);

CREATE TABLE IF NOT EXISTS PRODUCT_COMPONENTS (
    PRD_ID INT NOT NULL,
    CHILD_PRD_ID INT NOT NULL,
    PRIMARY KEY(PRD_ID, CHILD_PRD_ID),
    CONSTRAINT FK_PRODUCT FOREIGN KEY(PRD_ID) REFERENCES PRODUCT(PRD_ID),
    CONSTRAINT FK_PRODUCT_CHILD FOREIGN KEY(CHILD_PRD_ID) REFERENCES PRODUCT(PRD_ID)
);

INSERT INTO PRODUCT VALUES(1, 'HAMBURGER', 1);
INSERT INTO PRODUCT VALUES(2, 'COKE', 1);
INSERT INTO PRODUCT VALUES(3, 'SPRITE', 1);
INSERT INTO PRODUCT VALUES(4, 'FRIES', 1);
INSERT INTO PRODUCT VALUES(5, 'NUGGETS', 1);
INSERT INTO PRODUCT VALUES(6, 'DRINK CHOICE', 2);
INSERT INTO PRODUCT VALUES(7, 'SIDE CHOICE', 2);
INSERT INTO PRODUCT VALUES(8, 'BIG MAC MEAL', 3);
INSERT INTO PRODUCT VALUES(9, 'MCRIB MEAL', 3);

INSERT INTO PRODUCT_STATUS VALUES(1, 1);
INSERT INTO PRODUCT_STATUS VALUES(2, 0);
INSERT INTO PRODUCT_STATUS VALUES(3, 1);
INSERT INTO PRODUCT_STATUS VALUES(4, 1);
INSERT INTO PRODUCT_STATUS VALUES(5, 1);
INSERT INTO PRODUCT_STATUS VALUES(6, 0);
INSERT INTO PRODUCT_STATUS VALUES(7, 0);
INSERT INTO PRODUCT_STATUS VALUES(8, 0);
INSERT INTO PRODUCT_STATUS VALUES(9, 0);

INSERT INTO PRODUCT_COMPONENTS VALUES(6, 2);
INSERT INTO PRODUCT_COMPONENTS VALUES(6, 3);
INSERT INTO PRODUCT_COMPONENTS VALUES(7, 4);
INSERT INTO PRODUCT_COMPONENTS VALUES(7, 5);
INSERT INTO PRODUCT_COMPONENTS VALUES(8, 1);
INSERT INTO PRODUCT_COMPONENTS VALUES(8, 6);
INSERT INTO PRODUCT_COMPONENTS VALUES(8, 7);
INSERT INTO PRODUCT_COMPONENTS VALUES(9, 1);
INSERT INTO PRODUCT_COMPONENTS VALUES(9, 6);
INSERT INTO PRODUCT_COMPONENTS VALUES(9, 7);